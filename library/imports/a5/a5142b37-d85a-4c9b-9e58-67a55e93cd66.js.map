{"version":3,"sources":["assets\\Script\\Jet.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Jet extends cc.Component {\r\n\r\n    rigidBody: cc.RigidBody;\r\n\r\n    force: number = 500;\r\n    upforce: number = 2000;\r\n\r\n    horizontalVmax: number = 300;\r\n    verticalVmax: number = 200;\r\n\r\n    direction: number = 0;\r\n    key: { up: boolean, right: boolean, left: boolean } = { up: false, right: false, left: false };\r\n\r\n    onLoad() {\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n\r\n        this.rigidBody = this.getComponent(cc.RigidBody);\r\n\r\n    }\r\n\r\n    onKeyDown(event: cc.Event.EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.up:\r\n                this.key.up = true;\r\n                break;\r\n\r\n            case cc.macro.KEY.right:\r\n                this.key.right = true;\r\n                this.changeShipAngle(-30);\r\n                break;\r\n\r\n            case cc.macro.KEY.left:\r\n                this.changeShipAngle(30);\r\n                this.key.left = true;\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event: cc.Event.EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.up:\r\n                this.key.up = false;\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.key.right = false;\r\n                this.changeShipAngle(0);\r\n                break;\r\n            case cc.macro.KEY.left:\r\n                this.key.left = false;\r\n                this.changeShipAngle(0);\r\n                break;\r\n        }\r\n    }\r\n\r\n    changeShipAngle(angle: number) {\r\n\r\n        cc.tween(this.node)\r\n            .to(0.2, { angle: angle })\r\n            .start();\r\n    }\r\n\r\n    start() {\r\n        this.rigidBody.fixedRotation = true;\r\n        // this.rigidBody.enabledContactListener = true;\r\n    }\r\n\r\n    update(dt) {\r\n\r\n        if (this.key.left && this.rigidBody.linearVelocity.x > -this.horizontalVmax) {\r\n            this.rigidBody.applyForceToCenter(new cc.Vec2(-1 * this.force, 0), true);\r\n\r\n            // console.log(this.rigidBody.linearVelocity.x);\r\n\r\n        }\r\n\r\n        if (this.key.right && this.rigidBody.linearVelocity.x < this.horizontalVmax) {\r\n            this.rigidBody.applyForceToCenter(new cc.Vec2(1 * this.force, 0), true);\r\n\r\n            // console.log(this.rigidBody.linearVelocity.x);\r\n\r\n        }\r\n\r\n        if (this.key.up && this.rigidBody.linearVelocity.y < this.verticalVmax) {\r\n            this.rigidBody.applyForceToCenter(new cc.Vec2(0, this.upforce), true);\r\n        }\r\n\r\n    }\r\n\r\n    onDestroy() {\r\n        // Cancel keyboard input monitoring\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n}\r\n"]}